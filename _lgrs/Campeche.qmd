---
title: Campeche y Edzná
categories:
 - Mexico
 - Visita
 - Sitios arqueológicos
execute: 
 echo: false
---

Visitamos la ciudad de Campeche para poder visitar el sitio arqueológico de [Edzná](https://es.wikipedia.org/wiki/Edzn%C3%A1).

```{r}
#| warning: false
#| message: false
library(FlickrAPI)
library(pixture)
library(dplyr)
here::i_am("lgrs/Trieste.qmd")
```

```{r}
file_name <- here::here("data","google-photos.rds")
ggl_photos <- readRDS(file=file_name)

file_name <- here::here("data","iNaturalist-obs-NeoMapas.rds")
inat_photos <- readRDS(file=file_name)

seleccion <- c("Campeche|Edzná|Edzna")
```


```{r}
#| output: asis

img_folder <- "img"

photos <- ggl_photos %>% 
    filter(
        album %in% "Lugares - México",
        grepl(seleccion,mediaItems.description))

```


```{r}
#| output: asis
htmlcode <- "<center>\n<img src='%s/%s-%s.jpg'>\n<br/>\n**%s** by <a href='%s' target='googlephotos'>JR Ferrer-Paris @ Google Photos</a><br/></center>"

show_photo <- ggl_photos %>% 
    filter(
        album %in% "Lugares - México",
        grepl(seleccion,mediaItems.description)) %>% 
    slice_sample(n=1) %>%
    transmute(code = sprintf(htmlcode, img_folder, output_id, output_file, mediaItems.description,mediaItems.productUrl)) %>% pull()
cat(show_photo)
```



## Galería de fotos

```{r}

paths <- sprintf("%s/%s-%s.jpg",img_folder, pull(photos, output_id), pull(photos, output_file))
captions <- photos %>% transmute(caption=sprintf("<strong>%s</strong>  por <a href='%s' target='googlephotos'>JR Ferrer-Paris @ Google Photos</a>",mediaItems.description,mediaItems.productUrl)) %>% pull

pixgallery(paths, caption=captions)

```

## Observaciones en `iNaturalist`


```{r}
paths <- inat_photos %>% 
    filter(grepl(seleccion,place_guess)) %>% 
    pull(image_url)
captions <- inat_photos %>% 
    filter(grepl(seleccion,place_guess)) %>% 
    transmute(caption=sprintf("<strong>%s</strong> (<emph>%s</emph>) by <a href='%s' target='iNat'>NeoMapas @ iNaturalist</a>",species_guess,scientific_name,url)) %>% pull()

pixgallery(paths, caption=captions)
```